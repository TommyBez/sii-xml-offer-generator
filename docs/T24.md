# Task ID: T24

# Title: Issuer Details Form (FR-3.x)

# Status: pending

# Dependencies: T02 (completed)

Create UI and validation to collect the energy provider (issuer) company details that must appear in the generated XML and on the Offers Portal.

## Detailed Description

This form captures the legal and contact information for the company issuing the offer. Data will later be used in the XML nodes `SoggettoEmittente` or equivalent. The information is independent from the offer itself and will likely be reused across multiple offers during a session, so fields should be pre-filled if previously entered.

## Form Fields

| Field | XML Tag | Type | Constraint |
|-------|---------|------|------------|
| DENOMINAZIONE | NomeSocieta | Alfanumerico | Max 255 chars, mandatory |
| PIVA | PartitaIVA | Alfanumerico | 11 or 16 chars, mandatory |
| INDIRIZZO_SEDE | Indirizzo | Alfanumerico | Max 255 chars, mandatory |
| CAP_SEDE | CAP | Numerico | 5 digits, mandatory |
| COMUNE_SEDE | Comune | Alfanumerico | Max 255 chars, mandatory |
| PROVINCIA_SEDE | Provincia | Alfanumerico | 2 chars, mandatory |
| REA | REA | Alfanumerico | Max 20 chars, optional |
| PEC | PEC | Email | Max 100 chars, mandatory |
| TELEFONO | Telefono | Alfanumerico | Max 15 chars, mandatory |

## Validation Schema (Zod)

```typescript
const issuerSchema = z.object({
  DENOMINAZIONE: z.string().min(1).max(255),
  PIVA: z.string().length(11).or(z.string().length(16)),
  INDIRIZZO_SEDE: z.string().min(1).max(255),
  CAP_SEDE: z.string().regex(/^\d{5}$/),
  COMUNE_SEDE: z.string().min(1).max(255),
  PROVINCIA_SEDE: z.string().length(2),
  REA: z.string().max(20).optional(),
  PEC: z.string().email().max(100),
  TELEFONO: z.string().max(15),
});
```

## UI Components

- Use shadcn/ui `Input`, `Textarea`, and `Select` components.
- Group address fields logically with a heading "Registered Office".
- Provide automatic uppercase conversion for PIVA and REA.
- Show success check-marks on valid input.

## State Management

```typescript
interface IssuerDetailsData {
  DENOMINAZIONE: string;
  PIVA: string;
  INDIRIZZO_SEDE: string;
  CAP_SEDE: string;
  COMUNE_SEDE: string;
  PROVINCIA_SEDE: string;
  REA?: string;
  PEC: string;
  TELEFONO: string;
}
```

Persist this slice in Zustand so subsequent offers reuse the data.

## Acceptance Criteria

- [ ] All nine fields implemented with labels and help text
- [ ] Real-time validation with inline errors
- [ ] Data persisted to wizard store and draft
- [ ] Form integrated with stepper navigation
- [ ] Accessibility requirements met 